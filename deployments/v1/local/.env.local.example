# =============================================================================
# WebSocket Server Local Development Configuration - EXAMPLE
# =============================================================================
# Copy this file to .env.local and adjust as needed
#
# Usage:
#   cp .env.local.example .env.local
#   # Edit .env.local with your settings
#   docker-compose up -d

ENVIRONMENT=local

# =============================================================================
# SERVER
# =============================================================================
WS_ADDR=:3002

# =============================================================================
# KAFKA/REDPANDA
# =============================================================================
# Default: Use local Redpanda container
KAFKA_BROKERS=redpanda:9092
KAFKA_CONSUMER_GROUP=ws-server-local

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
# Adjust based on your machine:
# - 8GB machine:  WS_MEMORY_LIMIT=2147483648  (2GB)
# - 16GB machine: WS_MEMORY_LIMIT=4294967296  (4GB) ← Default
# - 32GB machine: WS_MEMORY_LIMIT=8589934592  (8GB)
WS_CPU_LIMIT=1.0
WS_MEMORY_LIMIT=4294967296  # 4GB

# Connections: Scale based on testing needs
# - Light testing:  WS_MAX_CONNECTIONS=100
# - Normal testing: WS_MAX_CONNECTIONS=1000  ← Default
# - Stress testing: WS_MAX_CONNECTIONS=5000
WS_MAX_CONNECTIONS=1000

# =============================================================================
# WORKER POOL
# =============================================================================
# Leave as 0 for auto-calculation
# Or set manually: WS_WORKER_POOL_SIZE=32, WS_WORKER_QUEUE_SIZE=3200
WS_WORKER_POOL_SIZE=0
WS_WORKER_QUEUE_SIZE=0

# =============================================================================
# RATE LIMITING
# =============================================================================
WS_MAX_KAFKA_RATE=1000
WS_MAX_BROADCAST_RATE=25
WS_MAX_GOROUTINES=3000

# =============================================================================
# SAFETY THRESHOLDS
# =============================================================================
WS_CPU_REJECT_THRESHOLD=75.0
WS_CPU_PAUSE_THRESHOLD=80.0

# =============================================================================
# MONITORING
# =============================================================================
METRICS_INTERVAL=15s

# =============================================================================
# LOGGING
# =============================================================================
# LOG_LEVEL options: debug, info, warn, error
# LOG_FORMAT options: pretty (human-readable), json (structured)
LOG_LEVEL=debug
LOG_FORMAT=pretty
