# =============================================================================
# Shared Base Configuration
# =============================================================================
# Purpose: Common defaults for all environments (local, GCP, etc.)
# Override: Set environment-specific values in local/overrides.env or gcp/overrides.env
#
# Load Order (lowest to highest priority):
#   1. This file (base.env)
#   2. kafka-topics.env
#   3. ports.env
#   4. Environment-specific overrides.env
#   5. .env.local or .env.production (secrets, gitignored)
#   6. docker-compose.yml environment section

# =============================================================================
# SERVER
# =============================================================================
# WebSocket server listen address (same for all environments)
WS_ADDR=:3002

# =============================================================================
# RATE LIMITING
# =============================================================================
# Production-validated defaults
WS_MAX_KAFKA_RATE=1000
WS_MAX_BROADCAST_RATE=25

# =============================================================================
# SAFETY THRESHOLDS
# =============================================================================
# CPU thresholds for connection control
WS_CPU_REJECT_THRESHOLD=80.0
WS_CPU_PAUSE_THRESHOLD=80.0

# =============================================================================
# LOGGING
# =============================================================================
# Structured logging for Loki/Grafana
LOG_LEVEL=info
LOG_FORMAT=json

# =============================================================================
# MONITORING
# =============================================================================
# Metrics collection interval
METRICS_INTERVAL=15s

# =============================================================================
# WORKER POOL (Auto-calculated if set to 0)
# =============================================================================
# Set to 0 to auto-calculate based on CPU
# Formula: max(32, CPU_LIMIT * 2)
WS_WORKER_POOL_SIZE=0

# Set to 0 to auto-calculate based on pool size
# Formula: WORKER_POOL_SIZE * 100
WS_WORKER_QUEUE_SIZE=0
